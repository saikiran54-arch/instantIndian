<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<!-- My CSS -->
    <link rel="stylesheet" href="/src/utilties.css">
	<link rel="stylesheet" href="/src/admin.css">

	<title>AdminDashboard</title>
</head>
<body>

	<div>
			<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand">
			<i class='bx bxs-user'></i>
			<span class="text heading">instantIndian</span>
		</a>
		<ul class="side-menu top">
			<li class="active">
				<a href="#">
					<i class='bx bxs-dashboard' ></i>
					<span class="text">Dashboard</span>
				</a>
			</li>
			<li>
				<a href="/public/menu.html">
					<i class='bx bxs-shopping-bag-alt' ></i>
					<span class="text">Menu</span>
				</a>
			</li>
			<li>
				<a href="/index.html">
					<i class='bx bxs-doughnut-chart' ></i>
					<span class="text">Home</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-message-dots' ></i>
					<span class="text">Message</span>
				</a>
			</li>
			<li>
				<a href="#">
					<i class='bx bxs-group' ></i>
					<span class="text">Team</span>
				</a>
			</li>
		</ul>
		<ul class="side-menu">
			<li>
				<a href="#">
					<i class='bx bxs-cog' ></i>
					<span class="text">Settings</span>
				</a>
			</li>
			<li>
				<a href="#" class="logout">
					<i class='bx bxs-log-out-circle' ></i>
					<span class="text">Logout</span>
				</a>
			</li>
		</ul>
	</section>
	<!-- SIDEBAR -->



	<!-- CONTENT -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu' ></i>
			<a href="#" class="nav-link">Categories</a>
			<form action="#">
				<div class="form-input">
					<input type="search" placeholder="Search...">
					<button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
				</div>
			</form>
			<input type="checkbox" id="switch-mode" hidden>
			<label for="switch-mode" class="switch-mode"></label>
			<a href="#" class="notification">
				<i class='bx bxs-bell' ></i>
				<span class="num">8</span>
			</a>
			<a href="#" class="profile">
				<img src="/img/people.png">
			</a>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<div class="head-title">
				<div class="left">
					<h1>Admin Dashboard</h1>
					<ul class="breadcrumb">
						<li>
							<a href="#">Dashboard</a>
						</li>
						<li><i class='bx bx-chevron-right' ></i></li>
						<li>
							<a class="active" href="#">Home</a>
						</li>
					</ul>
				</div>
				<a href="#" class="btn-download">
					<i class='bx bxs-cloud-download' ></i>
					<span class="text">Download PDF</span>
				</a>
			</div>

			<ul class="box-info">
				<li>
					<i class='bx bxs-calendar-check' ></i>
					<span class="text">
						<h3>0</h3>
						<p>New Order</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-group' ></i>
					<span class="text">
						<h3>0</h3>
						<p>Visitors</p>
					</span>
				</li>
				<li>
					<i class='bx bxs-dollar-circle' ></i>
					<span class="text">
						<h3>$0</h3>
						<p>Total Sales</p>
					</span>
				</li>
			</ul>


            <div class="table-data">
                <div class="order">
                    <div class="head">
                        <h3>Add New Item</h3>
                    </div>
                    <div class="order">
                        <div class="head"></div>
                        <div class="content">
                          <form action="#" class="add">
                            <div class="user-details">
                              <div class="input-box">
                                <span class="details">Dish Name</span>
                                <input type="text" placeholder="Enter dish name" required name="item">
                              </div>
                              <div class="input-box">
                                <span class="details">Category</span>
                                <!-- <input type="text" placeholder="Enter your username" required> -->
                                <select name="category" id="">
                                    <option value="">-- select category --</option>
                                    <option value="chicken">chicken</option>
                                    <option value="briyani">briyani</option>
                                    <option value="curries">curries</option>
                                    <option value="">snacks</option>
                                </select>
                              </div>                                                              
                              <div class="input-box">
                                <span class="details">small description</span>
                                <input type="text" placeholder="Enter small desc" required name="smalldescription">
                              </div>
                              <div class="input-box">
                                <span class="details">Price</span>
                                <input type="number" placeholder="Enter price of dish" required name="price">
                              </div>
                              <div class="input-box">
                                <span class="details">description</span>
                                <input type="text" placeholder="enter descprition" name="about" required>
                              </div>
                              <div class="input-box">
                                <span class="details">Ingredients</span>
                                <input type="text" placeholder="enter Ingredients" required name="ingredients">
                              </div>
                              <!-- <div class="input-box">
                                <div id="imgbox"></div>
                              </div>
                              <div class="input-box">
                                <button id="select_button" type="submit">select Image</button>
                              </div> -->
                            </div>
                            <!-- <div class="gender-details">
                              <input type="radio" name="gender" id="dot-1">
                              <input type="radio" name="gender" id="dot-2">
                              <input type="radio" name="gender" id="dot-3">
                              <span class="gender-title">Gender</span>
                              <div class="category">
                                <label for="dot-1">
                                <span class="dot one"></span>
                                <span class="gender">Male</span>
                              </label>
                              <label for="dot-2">
                                <span class="dot two"></span>
                                <span class="gender">Female</span>
                              </label>
                              <label for="dot-3">
                                <span class="dot three"></span>
                                <span class="gender">Prefer not to say</span>
                                </label>
                              </div>
                            </div> -->
                            <div class="button">
                              <input type="submit" value="Add Item">
                            </div>
                          </form>
                        </div>
                      </div>
                    
                    

                </div>
            </div>


			 <!-- <div class="table-data">
				<div class="order">
					<div class="head">
						<h3>Recent Orders</h3>
						<i class='bx bx-search' ></i>
						<i class='bx bx-filter' ></i>
					</div>
					<table>
						<thead>
							<tr>
								<th>User</th>
								<th>Date Order</th>
								<th>Status</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>
									<img src="img/people.png">
									<p>John Doe</p>
								</td>
								<td>01-10-2021</td>
								<td><span class="status completed">Completed</span></td>
							</tr>
							<tr>
								<td>
									<img src="img/people.png">
									<p>John Doe</p>
								</td>
								<td>01-10-2021</td>
								<td><span class="status pending">Pending</span></td>
							</tr>
							<tr>
								<td>
									<img src="img/people.png">
									<p>John Doe</p>
								</td>
								<td>01-10-2021</td>
								<td><span class="status process">Process</span></td>
							</tr>
							<tr>
								<td>
									<img src="img/people.png">
									<p>John Doe</p>
								</td>
								<td>01-10-2021</td>
								<td><span class="status pending">Pending</span></td>
							</tr>
							<tr>
								<td>
									<img src="img/people.png">
									<p>John Doe</p>
								</td>
								<td>01-10-2021</td>
								<td><span class="status completed">Completed</span></td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="todo">
					<div class="head">
						<h3>Todos</h3>
						<i class='bx bx-plus' ></i>
						<i class='bx bx-filter' ></i>
					</div>
					<ul class="todo-list">
						<li class="completed">
							<p>Todo List</p>
							<i class='bx bx-dots-vertical-rounded' ></i>
						</li>
						<li class="completed">
							<p>Todo List</p>
							<i class='bx bx-dots-vertical-rounded' ></i>
						</li>
						<li class="not-completed">
							<p>Todo List</p>
							<i class='bx bx-dots-vertical-rounded' ></i>
						</li>
						<li class="completed">
							<p>Todo List</p>
							<i class='bx bx-dots-vertical-rounded' ></i>
						</li>
						<li class="not-completed">
							<p>Todo List</p>
							<i class='bx bx-dots-vertical-rounded' ></i>
						</li>
					</ul>
				</div>
			</div> -->
		</main>
		<!-- MAIN -->
	</section>
	<!-- CONTENT -->
	

	
	<script src="/dist/bundle.js"></script>  
    <script>
        const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');

allSideMenu.forEach(item=> {
	const li = item.parentElement;

	item.addEventListener('click', function () {
		allSideMenu.forEach(i=> {
			i.parentElement.classList.remove('active');
		})
		li.classList.add('active');
	})
});




// TOGGLE SIDEBAR
const menuBar = document.querySelector('#content nav .bx.bx-menu');
const sidebar = document.getElementById('sidebar');

menuBar.addEventListener('click', function () {
	sidebar.classList.toggle('hide');
})







const searchButton = document.querySelector('#content nav form .form-input button');
const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
const searchForm = document.querySelector('#content nav form');

searchButton.addEventListener('click', function (e) {
	if(window.innerWidth < 576) {
		e.preventDefault();
		searchForm.classList.toggle('show');
		if(searchForm.classList.contains('show')) {
			searchButtonIcon.classList.replace('bx-search', 'bx-x');
		} else {
			searchButtonIcon.classList.replace('bx-x', 'bx-search');
		}
	}
})





if(window.innerWidth < 768) {
	sidebar.classList.add('hide');
} else if(window.innerWidth > 576) {
	searchButtonIcon.classList.replace('bx-x', 'bx-search');
	searchForm.classList.remove('show');
}


window.addEventListener('resize', function () {
	if(this.innerWidth > 576) {
		searchButtonIcon.classList.replace('bx-x', 'bx-search');
		searchForm.classList.remove('show');
	}
})



const switchMode = document.getElementById('switch-mode');

switchMode.addEventListener('change', function () {
	if(this.checked) {
		document.body.classList.add('dark');
	} else {
		document.body.classList.remove('dark');
	}
})
    </script>  
    <script type="module">

         

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-analytics.js";
  import { getFirestore, collection, addDoc, onSnapshot, doc, query, orderBy, getDocs, serverTimestamp, getDoc } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-firestore.js";
  import { createUserWithEmailAndPassword, getAuth, onAuthStateChanged, signOut,
signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-auth.js";
import { ref,deleteObject,getDownloadURL,uploadBytesResumable } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-storage.js";

  

const firebaseConfig = {
    apiKey: "AIzaSyDWQbBwUTdcw-_C0lLcFxbP0ej4shx-4s8",
    authDomain: "instantindian-10115.firebaseapp.com",
    databaseURL: "https://instantindian-10115-default-rtdb.firebaseio.com",
    projectId: "instantindian-10115",
    storageBucket: "instantindian-10115.appspot.com",
    messagingSenderId: "915082138910",
    appId: "1:915082138910:web:a758c82ea458ac5ae1e50f",
    measurementId: "G-YJDPN4EH5N"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth(app);


  //autheniaction
   // auth
//    onAuthStateChanged(auth,(user)=>{
//     var loginbtn = document.querySelector('#login');
//     var cart = document.querySelector('#cart');
//     var acc = document.querySelector('#acc');
//     var logoutbtn = document.querySelector('#logout');
    
//     if(user){
//         loginbtn.style.display = "none";
//         logoutbtn.style.display ="block";
//         cart.style.display = "block";
//         acc.style.display ="block";
//     }
    
//     else{
//         loginbtn.style.display="block";
//         logoutbtn.style.display="none";
//         cart.style.display = "none";
//         acc.style.display ="none";

//     }
// })
// const logout = document.querySelector(".logout-button");
// logout.addEventListener('click',(e)=>{
//     signOut(auth).then(()=>{
//         console.log("logout sucess");
//     }).catch((error)=>{
//         console.log("logout err",error.message);
//     })
// })


  
  const db = getFirestore(app);

    //collection reference 
    const colRef = collection(db, 'foodItems');

    //query
    const q = query(colRef, orderBy('createdAt'));


 


    

    const imgdiv = document.getElementById("imgbox");
    const selBtn = document.getElementById("select_button");

    

    // const uploadImage = (e) =>{

    //     const imageFile = e.target.files[0];
    //     const storageRef = ref(storage,`Images/${Date.now()} -{imageFile.name}`);
    //     const uploadTask = uploadBytesResumable(storageRef,imageFile);
        

    //     uploadTask.on('state_changed',(snapshot)=>{
    //   const uploadProgress = (snapshot.bytesTransferred/snapshot.totalBytes)*100;
    // },(error) =>{
    //   console.log(error);
    // //   setFields(true);
    //   setMsg('Error while uploading : Try Again');
    //   setAlertStatus('danger');
    //   setTimeout(()=>{
    //     setFields(false);
    //     setIsLoading(false);
    //   },4000);
    // },()=>{
    //   getDownloadURL(uploadTask.snapshot.ref).then(downloadURL =>{
    //     // setImageAsset(downloadURL);
    //     setMsg('Image Uploaded Sucessfully ');
    //     setAlertStatus('sucess')
    //     setTimeout(() => {
    //       setFields(false);
    //     }, 4000);
    //   })
    // })
    // }

    // selBtn.onclick = uploadImage();






    // adding documents
    const addItemForm = document.querySelector('.add');
    addItemForm.addEventListener('submit', (e) => {
        e.preventDefault()

        addDoc(colRef, {
            item: addItemForm.item.value,
            category: addItemForm.category.value,
            smalldescription: addItemForm.smalldescription.value,
            about : addItemForm.about.value,
            ingredients: addItemForm.ingredients.value,
            // calories: addItemForm.calories.value,
            price: addItemForm.price.value,
            createdAt: serverTimestamp()
        })
        .then(()=> {
            addItemForm.reset()
        })
    })

    //data on console
    onSnapshot(q, (snapshot) => {
        let foodItems = []
        snapshot.docs.forEach((doc) => {
            foodItems.push({ ...doc.data(), id: doc.id})
        })
        console.log(foodItems);
    })

    const fetchForm = document.querySelector(".fetch");
    const foodInfo = document.querySelector(".food_info");
    fetchForm.addEventListener('submit',(e)=>{
        e.preventDefault();
        const docRef = doc(db,'foodItems',fetchForm.food_id.value);
        getDoc(docRef)
        .then((doc)=>{
            // foodInfo.innerText = doc.data().ingredients;
            const child = document.createElement('h1');
            foodInfo.append(child);
            child.innerHTML = doc.data().item;
        })
    })


    

</script>

    

	</div>



</body>
</html>